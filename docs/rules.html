<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Filter, Rewrite and Scraper Rules - Documentation</title>
    
        <meta name="description" content="How to write custom scraper and rewrite rules">
    

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="/stylesheet.css">
    <link rel="alternate" type="application/atom+xml" title="Miniflux Releases" href="/feed.xml">
</head>
<body>
    <article>
        <h1>Filter, Rewrite and Scraper Rules</h1>
        <nav class="breadcrumb">
            <a href="../index.html">Home</a> &gt; <a href="index.html">Documentation</a>
        </nav>
        <ul>
<li><a href="#filtering-rules">Filtering Rules</a></li>
<li><a href="#rewrite-rules">Rewrite Rules</a></li>
<li><a href="#scraper-rules">Scraper Rules</a></li>
</ul>

<h2 id="filtering-rules">Filtering Rules <a class="anchor" href="#filtering-rules" title="Permalink">¶</a></h2>

<p>Miniflux has a basic filtering system that allows you to ignore or keep articles.</p>

<h3>Block Rules</h3>

<p>Block rules ignore articles with a title that match the regex.</p>

<p>For example, the regex <code>(?i)miniflux</code> will ignore all articles with a title that contains the word Miniflux (case insensitive).</p>

<p>Ignored articles won&rsquo;t be saved into the database.</p>

<h3>Keep Rules</h3>

<p>Keep rules keeps only articles that matches the regex.</p>

<p>For example, the regex <code>(?i)miniflux</code> will keep only the articles with a title that contains the word Miniflux (case insensitive).</p>

<h2 id="rewrite-rules">Rewrite Rules <a class="anchor" href="#rewrite-rules" title="Permalink">¶</a></h2>

<p>To improve the reading experience, it&rsquo;s possible to alter the content of feed items.</p>

<p>For example, if you are reading a popular comic website like <a href="https://xkcd.com/">XKCD</a>,
it&rsquo;s nice to have the image title (the <code>alt</code> attribute) added under the image.
Especially on mobile devices where there is no <code>hover</code> event.</p>

<dl>
    <dt><code>add_dynamic_image</code></dt>
    <dd>
        Tries to add the highest quality images from sites that use JavaScript to load images (e.g. either lazily when scrolling or based on screen size).
    </dd>
    <dt><code>add_image_title</code></dt>
    <dd>
        Add each image's title as a caption under the image.
    </dd>
    <dt><code>add_youtube_video</code></dt>
    <dd>
        Insert Youtube video to the article (automatic for Youtube.com).
    </dd>
    <dt><code>add_invidious_video</code></dt>
    <dd>
        Insert Invidious player to the article (automatic for https://invidio.us).
    </dd>
    <dt><code>add_youtube_video_using_invidious_player</code></dt>
    <dd>
        Insert Invidious player to the article for Youtube feeds.
    </dd>
    <dt><code>add_mailto_subject</code></dt>
    <dd>
        Insert mailto links subject into the article.
    </dd>
    <dt><code>nl2br</code></dt>
    <dd>
        Convert new lines <code>\n</code> to <code>&lt;br&gt;</code> (useful for non-HTML contents).
    </dd>
    <dt><code>convert_text_links</code></dt>
    <dd>
        Convert text link to HTML links (useful for non-HTML contents).
    </dd>
    <dt><code>fix_medium_images</code></dt>
    <dd>
        Attempt to fix Medium's images rendered in Javascript.
    </dd>
    <dt><code>use_noscript_figure_images</code></dt>
    <dd>
        Use <code>&lt;noscript&gt;</code> content for images rendered with Javascript.
    </dd>
    <dt><code>replace("search term"|"replace term")</code></dt>
    <dd>
        Search and replace text.
    </dd>
</dl>

<p>Miniflux includes a set of default rules for some websites, but you could define your own rules.</p>

<p>On the feed edit page, enter your custom rules in the field &ldquo;Rewrite Rules&rdquo; like this:</p>

<pre><code>rule1,rule2
</code></pre>

<p>Separate each rule by a comma.</p>

<h2 id="scraper-rules">Scraper Rules <a class="anchor" href="#scraper-rules" title="Permalink">¶</a></h2>

<p>When an article contains only an extract of the content, you could fetch
the original web page and apply a set of rules to get relevant contents.</p>

<p>Miniflux uses CSS selectors for custom rules. These custom rules can be
saved in the feed properties (Select a feed and click on edit).</p>

<table>
<thead>
<tr>
<th>CSS Selector</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>div#articleBody</code></td>
<td>Fetch a <code>div</code> element with the ID <code>articleBody</code></td>
</tr>

<tr>
<td><code>div.content</code></td>
<td>Fetch all <code>div</code> elements with the class <code>content</code></td>
</tr>

<tr>
<td><code>article, div.article</code></td>
<td>Use a comma to define multiple rules</td>
</tr>
</tbody>
</table>
<p>Miniflux includes a list of predefined rules for popular websites.
You could contribute to the project to keep them up to date.</p>

<p>Under the hood, Miniflux uses the library <a href="https://github.com/PuerkitoBio/goquery">Goquery</a>.</p>

    </article>
</body>
</html>
